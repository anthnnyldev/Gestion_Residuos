{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Gestion Residuos{% endblock %}</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans leading-normal tracking-normal flex flex-col min-h-screen">

    <nav class="bg-sky-600 p-4">
        <div class="container mx-auto flex justify-between items-center">
            <a href="#" class="text-white text-xl font-bold">
                CodeBreakers
            </a>
            <div class="flex items-center">
                <a href="{% url 'home:home' %}" class="text-white hover:text-gray-300 px-4">Inicio</a>
                <a href="{% url 'home:datos' %}" class="text-white hover:text-gray-300 px-4">Ecovision</a>
                <a href="{% url 'home:about' %}" class="text-white hover:text-gray-300 px-4">Sobre Nosotros</a>

                {% if user.is_authenticated %}
                <!-- Dropdown para usuario logueado -->
                <div class="relative">
                    <button class="bg-white text-sky-600 font-semibold px-4 py-2 rounded-full hover:bg-gray-200 transition-all flex items-center gap-2">
                        {% if user.profile_image %}
                            <img src="{{ user.profile_image.url }}" alt="Imagen de Perfil" class="w-8 h-8 rounded-full">
                        {% else %}
                            <div class="w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-white">U</div>
                        {% endif %}
                        <i class="bx bx-chevron-down"></i>
                    </button>
                    <div class="dropdown-content absolute right-0 bg-white shadow-lg rounded-lg mt-2 w-48 py-2 hidden">
                        <a href="{% url 'dashboard:home' %}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Dashboard</a>
                        <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Perfil</a>
                        <a href="{% url 'security:logout' %}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Cerrar Sesión</a>
                    </div>
                </div>
                {% else %}
                <!-- Enlace para login si no está logueado -->
                <a href="{% url 'security:login' %}" class="bg-white text-sky-600 font-semibold px-4 py-2 rounded-full hover:bg-gray-200 transition-all">Login</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <main class="container mx-auto flex-1">
        {% block content %}
        <!-- Aquí va el contenido específico de cada página -->
        {% endblock %}
    </main>

    <footer class="bg-sky-500 text-white p-8 mt-12 text-lg">
        <div class="container mx-auto flex justify-between items-center">
            <!-- Textos alineados a la izquierda -->
            <p>&copy; 2024 Gestion Residuos. Todos los derechos reservados.</p>
    
            <!-- Íconos alineados a la derecha -->
            <div class="flex gap-6">
                <a href="#" class="hover:text-white">
                    <i class="bx bxl-facebook text-2xl"></i>
                </a>
                <a href="#" class="hover:text-white">
                    <i class="bx bxl-twitter text-2xl"></i>
                </a>
                <a href="#" class="hover:text-white">
                    <i class="bx bxl-instagram text-2xl"></i>
                </a>
            </div>
        </div>
    </footer>

    <!-- Cargar dropdown -->
    <script src="{% static 'js/dropdown.js' %}"></script>

    <!-- Cargar la librería D3.js -->
    <script src="{% static 'js/d3.v7.js' %}"></script>
    <script src="{% static 'js/d3.v7.min.js' %}"></script>
    <script src="{% static 'js/d3_chart.js' %}"></script>
</body>
</html>
